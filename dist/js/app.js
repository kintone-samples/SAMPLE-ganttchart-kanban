!function(){var e,t={79503:function(e,t,n){"use strict";var r,a=n(90),o=n.n(a),i=n(88066),l=n.n(i),c=n(61577),u=n.n(c),d=n(67294),s=n(20745),p=n(73935),f=n(13710),v=n(45567),m=n(11006),w=n.n(m),g=n(50047),h=n.n(g),E=n(53791),y=(n(45659),function(e){var t=e.onViewModeChange;return d.createElement(d.Fragment,null,d.createElement(f.ZP.Group,{defaultValue:E.w.Day,buttonStyle:"solid",onChange:function(e){return t(e.target.value)}},d.createElement(f.ZP.Button,{value:E.w.QuarterDay},E.w.QuarterDay),d.createElement(f.ZP.Button,{value:E.w.HalfDay},E.w.HalfDay),d.createElement(f.ZP.Button,{value:E.w.Day},E.w.Day),d.createElement(f.ZP.Button,{value:E.w.Week},E.w.Week),d.createElement(f.ZP.Button,{value:E.w.Month},E.w.Month)))}),k=n(33938),b=n(89356),C=n.n(b),Z=n(63109),D=n.n(Z),S=n(16904),P=n(55687),x=n.n(P),O=function(e){return(new S.KintoneRestAPIClient).record.getRecords({app:kintone.app.getId(),query:"".concat(e||""," order by $id asc")})},M=function(){var e=(0,k.Z)(D().mark((function e(t,n){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.KintoneRestAPIClient).record.updateRecord({app:kintone.app.getId(),id:t,record:{status:{value:n}}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=(0,k.Z)(D().mark((function e(t,n,r){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new S.KintoneRestAPIClient).record.updateRecord({app:kintone.app.getId(),id:t,record:{startDate:{value:n},endDate:{value:r}}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=(0,k.Z)(D().mark((function e(t,n){var r,a,i,l,c,u;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kintone.Promise.all([(new S.KintoneRestAPIClient).app.getFormFields({app:kintone.app.getId()}),O(n)]);case 2:r=e.sent,a=(0,v.Z)(r,2),i=a[0],l=a[1],c=new(o()),u=new(o()),C()(i.properties.type.options).forEach((function(e){c.set(e,x()(e))})),C()(i.properties.status.options).forEach((function(e){u.set(e,i.properties.status.options[e].index)})),t(l.records,u,c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=n(11382),I=n(74938),z=function(e){var t=e.query,n=void 0===t?"":t,r=d.useState(E.w.Day),a=(0,v.Z)(r,2),o=a[0],i=a[1],l=d.useState(),c=(0,v.Z)(l,2),u=c[0],s=c[1],p=d.useState(!0),f=(0,v.Z)(p,2),m=f[0],g=f[1],k=60;o===E.w.Month?k=300:o===E.w.Week&&(k=250);(0,d.useEffect)((function(){T(C,n)}),[]);var b,C=function(e,t,n){0===e.length?g(!1):s(h()(e).call(e,(function(e){return{id:e.$id.value,name:e.summary.value,start:new Date(e.startDate.value+"T00:00:00.000+09:00"),end:new Date(e.endDate.value+"T23:59:59.000+09:00"),progress:Math.ceil(100*(t.get(e.status.value)||0)/Math.max(t.size-1,1)),styles:{progressColor:n.get(e.type.value)||"#ff9e0d",progressSelectedColor:"#ff9e0d"},dependencies:e.parent.value?[e.parent.value]:[],type:"task"}})))};return b=u&&u.length>0?d.createElement("div",null,d.createElement(y,{onViewModeChange:function(e){return i(e)}}),d.createElement(E.A,{tasks:u,viewMode:o,onDateChange:function(e){var t=new Date(e.start.getTime()-60*e.start.getTimezoneOffset()*1e3).toISOString().split("T")[0],n=new Date(e.end.getTime()-60*e.end.getTimezoneOffset()*1e3).toISOString().split("T")[0];F(e.id,t,n)},onDoubleClick:function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"show#record="+e.id;window.location.assign(w()(t).call(t,"showshow","show"))},listCellWidth:"155px",columnWidth:k,todayColor:"#FCFF19"})):m?d.createElement("div",{className:"center"},d.createElement(B.Z,{size:"large",tip:"Loading..."})):d.createElement(I.ZP,{title:"No data"}),d.createElement(d.Fragment,null,b)},j=n(79183),A=n(52675),G=n(29094),$=n(60331),H=A.Z.Meta,R=function(e){var t;return d.createElement(G.C.Group,{maxCount:2,size:"large",maxStyle:{color:"#f56a00",backgroundColor:"#fde3cf"}},h()(t=e.assignee.value).call(t,(function(e){return d.createElement(G.C,{style:{backgroundColor:"#15dad2"},key:e.code},e.name)})))},K=function(e){var t;return d.createElement(A.Z,{extra:d.createElement($.Z,{color:e.labelColor},e.label),style:{width:300},title:e.title,onClick:e.onClick},d.createElement(H,{avatar:d.createElement(R,{assignee:e.assignee}),title:l()(t="".concat(e.startDate.substring(5),"~")).call(t,e.endDate.substring(5)),description:e.description}))},W=function(){var e=d.useState(),t=(0,v.Z)(e,2),n=t[0],r=t[1],a=d.useState(!0),o=(0,v.Z)(a,2),i=o[0],l=o[1],c=function(e,t,n){if(0===e.length)l(!1);else{var a=new Array(t.size);t.forEach((function(e,t){a[e]={id:t,title:t,cards:new Array}})),e.forEach((function(e){return a[t.get(e.status.value)].cards.push({id:e.$id.value,title:e.summary.value,label:e.type.value,labelColor:n.get(e.type.value),description:e.detail.value,assignee:e.assignee,startDate:e.startDate.value,endDate:e.endDate.value})})),r({lanes:a})}};(0,d.useEffect)((function(){T(c,kintone.app.getQueryCondition()||void 0)}),[]);var u;return u=n?d.createElement(j.ZP,{data:n,draggable:!0,onCardClick:function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"show#record="+e;window.location.assign(t)},hideCardDeleteIcon:!0,handleDragEnd:function(e,t,n){M(e,n)},style:{padding:"30px 20px",backgroundColor:"#5F9AF8"},components:{Card:K}}):i?d.createElement("div",{className:"center"},d.createElement(B.Z,{size:"large",tip:"Loading..."})):d.createElement(I.ZP,{title:"No data"}),d.createElement(d.Fragment,null,u)};!function(e){e.Gantt="Gantt",e.Board="Kanban"}(r||(r={}));var q=function(){return(0,d.useEffect)((function(){p.render(d.createElement(W,null),kintone.app.getHeaderSpaceElement())}),[]),d.createElement(d.Fragment,null,d.createElement(f.ZP.Group,{defaultValue:r.Board,buttonStyle:"solid",size:"large",onChange:function(e){e.target.value===r.Gantt?p.render(d.createElement(z,{query:kintone.app.getQueryCondition()||void 0}),kintone.app.getHeaderSpaceElement()):p.render(d.createElement(W,null),kintone.app.getHeaderSpaceElement())}},d.createElement(f.ZP.Button,{value:r.Gantt},r.Gantt),d.createElement(f.ZP.Button,{value:r.Board},r.Board)))},N=n(88440),Q=n(76222),V=n(42579),_=function(e){var t=e.id,n=void 0===t?"":t;return d.createElement(N.Z,{title:"add sub task"},d.createElement(Q.Z,{type:"primary",shape:"circle",icon:d.createElement(V.Z,null),size:"large",onClick:function(){if(n){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+"edit?pid="+n;window.location.assign(w()(e).call(e,"showedit","edit"))}}}))},L=new(o());function J(e,t){L.has(e)||L.set(e,(0,s.s)(e)),L.get(e).render(t)}kintone.events.on("app.record.index.show",(function(e){var t=kintone.app.getHeaderMenuSpaceElement();return t?(J(t,d.createElement(q,null)),e):e})),kintone.events.on("app.record.detail.show",(function(e){var t,n=l()(t="parent = ".concat(e.record.$id.value," or $id= ")).call(t,e.record.$id.value);e.record.parent.value&&(n+=" or $id = ".concat(e.record.parent.value));var r=kintone.app.getHeaderMenuSpaceElement();if(!r)return e;J(r,d.createElement(z,{query:n}));var a=kintone.app.record.getSpaceElement("addSub");return a?(J(a,d.createElement(_,{id:e.record.$id.value})),e):e})),kintone.events.on("app.record.create.show",(function(e){var t=window.location.search,n=new(u())(t).get("pid");return n&&(e.record.parent.value=n),e}))},24654:function(){}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],o=e[d][2];for(var l=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,i=n[0],l=n[1],c=n[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(c)var d=c(r)}for(t&&t(n);u<i.length;u++)o=i[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},n=self.webpackChunkkpm=self.webpackChunkkpm||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[351],(function(){return r(79503)}));a=r.O(a)}();